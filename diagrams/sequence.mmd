
</details>

---

## 4. diagrams/sequence.mmd (copy-paste)

```mermaid
sequenceDiagram
    autonumber
    participant Agent
    participant APAA as Authorization Server
    participant Executor
    participant Audit

    Agent->>APAA: POST /authorize (ActionRequest)
    APAA->>Audit: Log ActionRequested

    alt DENY
        APAA-->>Agent: AuthorizationDecision (DENY)
    else ALLOW
        APAA-->>Agent: AuthorizationDecision (ALLOW + Lease)
        Agent->>Executor: Execute with lease
        Executor->>Executor: Enforce constraints
        Executor->>APAA: POST /receipt
        APAA->>Audit: Log ExecutionReceipt
    end
